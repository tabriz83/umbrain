<!DOCTYPE html>
<html>
<head>
    <!-- [[! Document Settings ]] -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- [[! Page Meta ]] -->
    <title>우리집에 GDB 있는데... 메모리 보고갈래? (1)</title>
    <meta name="description" content="Into the Brain of taBRis - Memory Repository." />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/umbrain/assets/images/Favicon.png" >

    <!-- [[! Styles'n'Scripts ]] -->
    <link rel="stylesheet" type="text/css" href="/umbrain/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css"
          href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" type="text/css" href="/umbrain/assets/css/syntax.css" />
    
    <!-- [[! Ghost outputs important style and meta data with this tag ]] -->
        <link rel="canonical" href="/umbrain/" />
    <meta name="referrer" content="origin" />
    <link rel="next" href="/umbrain/page2/" />

    <meta property="og:site_name" content="Into the Brain of taBRis" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Into the Brain of taBRis" />
    <meta property="og:description" content="Memory Repository." />
    <meta property="og:url" content="/umbrain/" />
    <meta property="og:image" content="/umbrain/assets/images/cover1.jpg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Into the Brain of taBRis" />
    <meta name="twitter:description" content="Memory Repository." />
    <meta name="twitter:url" content="/umbrain/" />
    <meta name="twitter:image:src" content="/umbrain/assets/images/cover1.jpg" />

    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Website",
    "publisher": "Into the Brain of taBRis",
    "url": "/umbrain/",
    "image": "/umbrain/assets/images/cover1.jpg",
    "description": "Memory Repository."
}
    </script>

    <meta name="generator" content="Jekyll 3.0.0" />
    <link rel="alternate" type="application/rss+xml" title="Into the Brain of taBRis" href="/umbrain/rss.xml" />

</head>
<body class="post-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        <li class="nav-home " role="presentation"><a href="/umbrain/">Main</a></li>
        <li class="nav-security " role="presentation"><a href="/umbrain/tag/Security">Security</a></li>
        <li class="nav-unclassified " role="presentation"><a href="/umbrain/tag/Unclassified">Unclassified</a></li>
        <li class="nav-author " role="presentation"><a href="/umbrain/author/tabris">Author</a></li>
    </ul>
	<a class="subscribe-button icon-feed" href="/umbrain/rss.xml">Subscribe</a>
	<!— Html Elements for Search -->
	<div class="search-container">
	<input type="text" id="search-input" size="23" placeholder="Search...">
	<ul id="results-container"></ul>
	<!-- Script pointing to jekyll-search.js -->
	<script src="/umbrain//dest/jekyll-search.js" type="text/javascript"></script>
	
	<script type="text/javascript">
		  SimpleJekyllSearch({
			searchInput: document.getElementById('search-input'),
			resultsContainer: document.getElementById('results-container'),
			json: '/umbrain//search.json',
			searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
			noResultsText: 'No results found',
			limit: 1000,
			fuzzy: false,
			exclude: ['Welcome']
		  })
	</script>
	</div>
	
</div>
<span class="nav-cover"></span>

    <div class="site-wrapper">

        <!-- [[! Everything else gets inserted here ]] -->
        <!-- < default -->

<!-- The comment above "< default" means - insert everything in this file into -->
    <!-- the [body] of the default.hbs template, which contains our header/footer. -->

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<header class="main-header post-head " style="background-image: url(/umbrain/assets/images/cover2.jpg) ">
    <nav class="main-nav  overlay  clearfix">
        <a class="blog-logo" href="/umbrain/"><img src="/umbrain/assets/images/logo.png" alt="Blog Logo" /></a>
        
            <a class="menu-button icon-menu" href="#"><span class="word">Menu</span></a>
        
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-Security">

        <header class="post-header">
            <h1 class="post-title">우리집에 GDB 있는데... 메모리 보고갈래? (1)</h1>
            <section class="post-meta">
            <!-- <a href='/umbrain/'>taBRis</a> -->
            <time class="post-date" datetime="2017-01-22">22 Jan 2017</time>
                <!-- [[tags prefix=" on "]] -->
                 
                on 
                
                    
                       <a href='/umbrain/tag/Security'>Security</a>,
                       
                
                    
                       <a href='/umbrain/tag/System Hacking'>System hacking</a>,
                       
                
                    
                       <a href='/umbrain/tag/Reversing'>Reversing</a>,
                       
                
                    
                       <a href='/umbrain/tag/Guide'>Guide</a>
                       
                
                
            </section>
        </header>

        <section class="post-content">
            
            <p><strong>출처 : <a href="https://bpsecblog.wordpress.com/2016/03/08/gdb_memory_1/">우리집에 GDB 있는데&hellip; 메모리 보고갈래? (1) - Hackerz on the Ship</a></strong></p>

<h2>들어가기에 앞서&hellip;</h2>

<blockquote>
<p>컴(존)알못들이여 오라.
보안 공부하다 높다란 진입장벽 앞에서 좌절하신 분들께 이 글을 바칩니다.
해커가 되겠다는 청운을 안고 대학을 입학했으나.. 4년 째 뉴비&hellip;★
컴알못인 제가 자세히 친절하게 하나하나 꼭꼭 씹어보겠습니다.</p>
</blockquote>

<hr>

<h2>Season 1. 우리집에 GDB있는데&hellip; 메모리 보고 갈래?</h2>

<p><br></p>

<h3>DAY #1. 듀근듀규뉸구누균ㄱ 첫만남</h3>

<p><br>
<img src="../assets/Post_Images/2017/01/22/gdb_memory_day1/gdb-memory-day1-intro.png" alt="*인트로*"></p>

<p>구체적으로 뭐하는지가 궁금하시다구여?
…뭘 하더라도 기초가 중요한 것 같네요.
메모리에 대한 썰부터 간단히 풀어볼게요!!
<br></p>

<p><img src="../assets/Post_Images/2017/01/22/gdb_memory_day1/gdb-memory-day1-1.png" alt="">
<em>[그림 1] 썰 주제 되십니다<sup id="fnref1"><a href="#fn1" rel="footnote">1</a></sup></em>
<br></p>

<hr>

<h4>1. 주소는 왜 때문에 0000 0000 ~ FFFF FFFF ???</h4>

<p>램은 몇 기가 쓰세여?<br>
제 노트북은 4GB의 램을 쓰고 있네요.</p>

<p><img src="../assets/Post_Images/2017/01/22/gdb_memory_day1/gdb-memory-day1-2.png" alt="">
<em>[그림 2] 이런거 은근 헷갈리지 않음요?</em>
<br></p>

<p>위의 계산에 의하면 4GB는 2<sup>32</sup> byte 사이즈의 메모리죠.</p>

<p>1Byte는 주소공간 한 개의 크기입니다<br>
즉, 4GB는 2<sup>32</sup> 개의 주소를 가질 수 있어요</p>

<p>그리고 1bit는 0 또는 1의 값만 가질 수 있기 때문에 32bit는 2<sup>32</sup> 만큼의 숫자를 표현할 수 있어요</p>

<p>32bit라는 것은 2<sup>32</sup> 개의 주소를 가지고 있다라는 뜻으로 이해하시면 됩니다!</p>

<p>그런데 우리가 메모리를 뭐로 접근합니까? 주소로 접근 하죠.<br>
32bit 운영체제는 수 표현을 최대 2<sup>32</sup> 까지 밖에 못 하기 때문에, 8GB나 16GB의 램을 가지고 있다고 하더라도 접근을 할 수가 없어요.</p>

<p>0000…0000(32개) 부터 1111….1111(32개) 까지를 보기 편하게 16진수로 변환하면?</p>

<p>00000000 ~ FFFFFFFF !</p>

<hr>

<h4>2. 유저 영역, 커널 영역은 왜 나뉘어져 있나</h4>

<p>시스템 운영에 필요한 메모리, 그리고 운영체제가 커널 영역에 올라가 있습니다.<br>
사용자가 운영체제가 올라가 있는 커널 영역에 마음대로 접근할 수 있다면…? 시스템이 안정적으로 운용될 수 없을거예여.</p>

<p>그렇기 때문에 사용자가 함부로 커널 영역에 접근할 수 없도록 메모리를 유저영역과 커널영역을 나누어 사용하는 겁니다.<br>
나누는 크기는 운영체제마다 다르고, 설정에 따라 영역의 크기를 조정할 수도 있어여.</p>

<hr>

<h4>3. 유저 영역의 메모리</h4>

<p>유저 메모리의 영역을 조금 더 자세히 살펴볼까요?</p>

<p><img src="../assets/Post_Images/2017/01/22/gdb_memory_day1/gdb-memory-day1-3.png" alt="">
<em>[그림 3] 안녕하새오 웬만한 기본서 펼치면 2n 페이지 쯤 있는 친구애오<sup id="fnref2"><a href="#fn2" rel="footnote">2</a></sup></em>
<br></p>

<h5>3-1. 코드영역</h5>

<p>일단 메모리에 코드가 올라옵니다. 코드가 뭐냐구요?</p>

<p><img src="../assets/Post_Images/2017/01/22/gdb_memory_day1/gdb-memory-day1-4.png" alt="">
<em>[그림 3] 네 바로 이겁니다</em>
<br></p>

<p>이런거 어디서 많이 봤죠? c소스를 컴파일하면 어셈블리 코드로 번역(?)되잖아요.<br>
이 저급한 애들이 코드 영역에 올라 간다는 거져ㅎㅎ<br>
주소보면 32bit 시스템에서 익숙한 0804~로 시작함다. 메모리에 코드1가 올라갈 때 보통 저 영역에 올라갑니다.
<br></p>

<h5>3-2. 데이터영역</h5>

<p>그 다음은 데이터 영역입니다.<br>
전역변수가 이 영역에 로드되는데 항상 동일한 메모리에 위치하게 됩니당.</p>

<p>사용자가 입력하는 값이 전역변수로 정의되어있다고 가정해봅시다.<br>
고정된 메모리 주소 그리고 그 주소에 원하는 값을 쓸 수 있다면? 익스플로잇에 활용될 가능성이 갱장히 높아지겠죠?</p>

<p>여기까지가 고정된 주소에 올라오는 영역입니다.
<br></p>

<h5>3-3. 힙영역</h5>

<p>힙 영역은 동적으로 메모리를 할당하여 사용하는 공간입니다.<br>
대표적인 메모리 할당 함수로는 malloc 이 있죠. malloc으로 필요한 공간을 할당하면 힙 영역을 쓰게 되는겁니다.<br>
쓰다가 필요 없어지면 해제 해주면 되죠.</p>

<p>이 말인 즉슨 내가 힙 영역에 어떤 값을 엄청 많이 뿌려놓고 free 해준 후<br>
다시 이 공간을 재사용한다면..? 후.. 뭔가 익스플로잇할 때 낭낭히 활용될 거 같죠?</p>

<p><em>후.. 방금 당신은 UAF를 배웠습니다.</em>
<br></p>

<h5>3-4. 스택영역</h5>

<p>마지막 두둥 (유저영역) 메모리의 가장 바닥부터 채워지는 스택이 있죠.<br>
스택은 거꾸로 자라는거 아시져?<br>
왜냐구요?<br>
스택이 끝도없이 위아래도 모르고 자라다가 커널 건드리면…. 주옥되잖아요…<br>
그래서 얘는 거꾸로 자라는 겁니다.<br>
스택영역은 함수인자나 지역변수들이 올라옵니다.<br>
보통 스택 주소보면 0xbfff 이런식이예요.  </p>

<p>힙과 스택은 고정된 메모리에 올라오는 것이 아니기 때문에, 이 영역을 활용해 한번에 깔끔하게 쉘 따기란 넘나 어려운 것…</p>

<p>다음 포스팅엔 gdb 활용법으로 찾아오도록 할게여.<br>
메모리 구조를 gdb를 통해 뜯어보는 시간도 가져보도록 하겠슴다. 그럼 뿅★</p>

<p><em>written by in09</em></p>

<div class="footnotes">
<hr>
<ol>

<li id="fn1">
<p>[그림 1]: Pictogram(crown) created by Paul Verhulst from Noun Project&nbsp;<a href="#fnref1" rev="footnote">&#8617;</a></p>
</li>

<li id="fn2">
<p>[그림 3]: Pictogram(book) created by Jakub Caja from Noun Project&nbsp;<a href="#fnref2" rev="footnote">&#8617;</a></p>
</li>

</ol>
</div>


        </section>

        <footer class="post-footer">

            <!-- Everything inside the #author tags pulls data from the author -->
            <!-- #author-->

            
            <figure class="author-image">
                <a class="img" href="/umbrain/author/tabris" style="background-image: url(/umbrain/assets/images/author_ico.png)"><span class="hidden">'s Picture</span></a>
            </figure>
            

            <section class="author">
                <h4><a href="/umbrain/author/tabris">taBRis</a></h4>
                
                
                    <p> Into the Brain of taBRis.</p>
                
                <div class="author-meta">
                     
                    <span class="author-link icon-link"><a href="http://tabriz83.github.io/umbrain/"> tabriz83.github.io/umbrain/</a></span> 
                </div>
            </section>

            <!-- /author  -->

            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=우리집에 GDB 있는데... 메모리 보고갈래? (1)&amp;url=http://tabriz83.github.io/umbrain/gdb-memory-day1"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://tabriz83.github.io/umbrain/gdb-memory-day1"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://tabriz83.github.io/umbrain/gdb-memory-day1"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>
            
            <!-- Add Disqus Comments -->
            
            
        </footer>

    </article>

</main>

<aside class="read-next">

    <!-- [[! next_post ]] -->
    
        <a class="read-next-story " style="background-image: url(/umbrain/assets/images/cover2.jpg)" href="/umbrain/gdb-memory-day2">
            <section class="post">
                <h2>우리집에 GDB 있는데... 메모리 보고갈래? (2)</h2>
                <p>**출처 : [우리집에 GDB 있는데... 메모리 보고갈래? (2) - Hackerz on the Ship](https://bpsecblog.wordpress.com/2016/04/04/gdb_memory_2/)** ## Season...</p>
            </section>
        </a>
    
    <!-- [[! /next_post ]] -->
    <!-- [[! prev_post ]] -->
    
        <a class="read-next-story prev " style="background-image: url(/umbrain/assets/images/cover2.jpg)" href="/umbrain/System_Hacking_Study_Guide_for_Beginner">
            <section class="post">
                <h2>초보자를 위한 시스템해킹 공부 가이드라인</h2>
                <p>출처 : 초보자를 위한 시스템 해킹 공부 가이드라인 - 홍승표 作(a.k.a Phantom) 1. 기본기 C언어,...</p>
            </section>
        </a>
    
    <!-- [[! /prev_post ]] -->
</aside>

<!-- /post -->


        <footer class="site-footer clearfix">
          <section class="copyright"><a href="/umbrain/">UMBrain :: Into the Brain of taBRis.</a> &copy; 2017</section>
          <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/biomadeira/jasper">Jasper</a></section>
        </footer>
    </div>
    <!-- [[! Ghost outputs important scripts and data with this tag ]] -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- [[! The main JavaScript file for Casper ]] -->
    <script type="text/javascript" src="/umbrain/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/umbrain/assets/js/index.js"></script>

    <!-- Add Google Analytics  -->
        <!-- Google Analytics Tracking code -->
     <script>
	    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	    ga('create', 'UA-69281367-1', 'auto');
	    ga('send', 'pageview');

     </script>   
</body>
</html>
